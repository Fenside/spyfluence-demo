$("#followers").click(function(){let i=/(?:(?:http|https):\/\/)?(?:www.)?(?:instagram.com|instagr.am)\/([A-Za-z0-9-_\.]+)/g,e=$("#competitor").val();if(e===undefined||""===e)return $("#invalid-link").text("Invalid Instagram Profile URL"),$("#invalid-link").removeClass("hide"),void $("#invalid-link").addClass("show");let n=i.exec(e);if(null==n||null==n[1])return $("#invalid-link").text("Invalid Instagram Profile URL"),$("#invalid-link").removeClass("hide"),void $("#invalid-link").addClass("show");$.ajax({url:`https://www.instagram.com/${n[1]}`,success:function(i){if(i.includes('"is_private":true'))$("#invalid-link").text("Invalid Instagram Profile (Private)"),$("#invalid-link").removeClass("hide"),$("#invalid-link").addClass("show");else{let e=i.match(new RegExp('"edge_followed_by":{"count":(.*?)}'));e&&Number(e[1])>0?($("#invalid-link").removeClass("show"),$("#invalid-link").addClass("hide"),$.ajax({url:"/charges/redirect",type:"GET",beforeSend:function(i){i.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:{mode:"followers",account:n[1],amount:Number(e[1])},contentType:"application/json",success:function(i){window.location.href=i.redirect},error:function(){$("#invalid-link").text("Unexpected Error. Please contact support if this persists. (2)"),$("#invalid-link").removeClass("hide"),$("#invalid-link").addClass("show")}})):e&&Number(e[1])<=0?($("#invalid-link").text("Invalid Instagram Profile. Too few followers."),$("#invalid-link").removeClass("hide"),$("#invalid-link").addClass("show")):($.ajax({url:"/logs",type:"POST",beforeSend:function(i){i.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:{message:`Error determining followers count for ${n[1]}. Check regex.`}}),$("#invalid-link").text("Error determining followers count. Please try again or contact us if this issue persists."),$("#invalid-link").removeClass("hide"),$("#invalid-link").addClass("show"))}},error:function(){$("#invalid-link").text("Unexpected Error. Please contact support if this persists. (1)"),$("#invalid-link").removeClass("hide"),$("#invalid-link").addClass("show")}})}),$("#following").click(function(){let i=/(?:(?:http|https):\/\/)?(?:www.)?(?:instagram.com|instagr.am)\/([A-Za-z0-9-_\.]+)/g,e=$("#competitor").val();if(e===undefined||""===e)return $("#invalid-link").text("Invalid Instagram Profile URL"),$("#invalid-link").removeClass("hide"),void $("#invalid-link").addClass("show");let n=i.exec(e);if(null==n||null==n[1])return $("#invalid-link").text("Invalid Instagram Profile URL"),$("#invalid-link").removeClass("hide"),void $("#invalid-link").addClass("show");$.ajax({url:`https://www.instagram.com/${n[1]}`,success:function(i){if(i.includes('"is_private":true'))$("#invalid-link").text("Invalid Instagram Profile (Private)"),$("#invalid-link").removeClass("hide"),$("#invalid-link").addClass("show");else{let e=i.match(new RegExp('"edge_follow":{"count":(.*?)}'));e&&Number(e[1])>0?($("#invalid-link").removeClass("show"),$("#invalid-link").addClass("hide"),$.ajax({url:"/charges/redirect",type:"GET",beforeSend:function(i){i.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:{mode:"following",account:n[1],amount:Number(e[1])},contentType:"application/json",success:function(i){window.location.href=i.redirect},error:function(){$("#invalid-link").text("Unexpected Error. Please contact support if this persists. (2)"),$("#invalid-link").removeClass("hide"),$("#invalid-link").addClass("show")}})):e&&Number(e[1])<=0?($("#invalid-link").text("Invalid Instagram Profile. Too few following."),$("#invalid-link").removeClass("hide"),$("#invalid-link").addClass("show")):($.ajax({url:"/logs",type:"POST",beforeSend:function(i){i.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},data:{message:`Error determining following count for ${n[1]}. Check regex.`}}),$.post("/logs",{message:`Error determining following count for ${n[1]}. Check regex.`}),$("#invalid-link").text("Error determining following count. Please try again or contact us if this issue persists."),$("#invalid-link").removeClass("hide"),$("#invalid-link").addClass("show"))}},error:function(){$("#invalid-link").text("Unexpected Error. Please contact support if this persists. (1)"),$("#invalid-link").removeClass("hide"),$("#invalid-link").addClass("show")}})});